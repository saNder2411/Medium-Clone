import Axios from 'axios';

export default class MediumCloneService {

  _baseUrl = `https://conduit.productionready.io/api/`;

  _API = Axios.create({
    baseURL: this._baseUrl,
    timeout: 1000 * 5,
    withCredentials: true,
  });

  getResourceForUseFetch = async (url, {method = `get`, data = {}}) => {
    const res = await this._API[method](url, data);

    if (!res.ok) {
      throw new Error(`Could not fetch ${url}, received ${res.status}`);
    }

    return res;

  };

  _postResource = async (url, sendData) => {
    const res = await this._API.post(url, sendData);

    if (!res.ok) {
      throw new Error(`Could not fetch ${url}, received ${res.status}`);
    }

    return res.data;
  };

  
  logInUser = async (authData) => {
    const userData = await this._postResource(`users/login`, authData);

    return userData;
  };
}