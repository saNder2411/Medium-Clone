import Axios from 'axios';

export default class MediumCloneService {

  _baseUrl = `https://conduit.productionready.io/api/`;

  _API = Axios.create({
    baseURL: this._baseUrl,
    timeout: 1000 * 5,
    withCredentials: true,
  });

  getResource = async (url) => {
    const res = await this._API.get(url);

    if (!res.ok) {
      throw new Error(`Could not fetch ${url}, received ${res.status}`);
    }

    return await res.data;
  };

  postResource = async (url, postData) => {
    const res = await this._API.post(url, postData);

    if (!res.ok) {
      throw new Error(`Could not fetch ${url}, received ${res.status}`);
    }

    return await res.data;
  };

  
  logInUser = async (authData) => {
    const userData = await this.postResource(`users/login`, authData);

    return userData;
  };
}