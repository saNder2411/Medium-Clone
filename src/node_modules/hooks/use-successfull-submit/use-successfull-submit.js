import {useState, useEffect} from 'react';
import useLocalStorage from 'hooks/use-local-storage/use-local-storage';


const useSuccessfullSubmit = (data, setCurrentUserState) => {
  const [isSuccessfullSubmit, setIsSuccessfullSubmit] = useState(false);
  const [, setToken] = useLocalStorage(`token`);

  useEffect(() => {
    if (data) {
      setToken(data.user.token);
      setIsSuccessfullSubmit(true);
      setCurrentUserState((state) => ({
        ...state,
        loading: false,
        loggedIn: true,
        currentUser: data.user,
      }));
    }
  }, [data, setToken, setCurrentUserState]);

  return isSuccessfullSubmit;
};

export default useSuccessfullSubmit;