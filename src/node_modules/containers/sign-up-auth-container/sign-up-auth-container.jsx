import React, {useState, useMemo} from 'react';
import Auth from 'pages/auth/auth';
import {useSignUpUser} from 'hooks/use-service/use-service';
import useSuccessfullSubmit from 'hooks/use-successfull-submit/use-successfull-submit';


const SignUpAuthContainer = ({match}) => {
  const [username, setUsername] = useState(``);
  const [email, setEmail] = useState(``);
  const [password, setPassword] = useState(``);

  const userData = useMemo(() => ({
    user: {username, email, password},
  }), [username, email, password]);

  const [{isLoading, data}, doRequest] = useSignUpUser(userData);
  const isSuccessfullSubmit = useSuccessfullSubmit(data);

  const handleFormSubmit = (evt) => {
    evt.preventDefault();
    doRequest();
  };

  return (
    <Auth
      path={match.path}
      username={username}
      email={email}
      password={password}
      isLoading={isLoading}
      isSuccessfullSubmit={isSuccessfullSubmit}
      setUsername={setUsername}
      setEmail={setEmail}
      setPassword={setPassword}
      onFormSubmit={handleFormSubmit} />);
};

export default SignUpAuthContainer;