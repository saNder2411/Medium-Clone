import React, {useState, useEffect} from 'react';
import Auth from 'pages/auth/auth';
import Axios from 'axios';

const AuthContainer = () => {
  const [email, setEmail] = useState(``);
  const [password, setPassword] = useState(``);
  const [isSubmmitting, setIsSubmitting] = useState(false);

  useEffect(() => {
    if (!isSubmmitting) {
      return;
    }

    Axios.post(`https://conduit.productionready.io/api/users/login`,{
          email: `qq@qq.com`,
          password: `123`,
        })
        .then((res) => {
          console.log(res);
          setIsSubmitting(false);
        })
        .catch((err) => {
          console.log(err);
          setIsSubmitting(false);
        });

  }, [email, isSubmmitting]);

  const handleFormSubmit = (evt) => {
    evt.preventDefault();
    const userAuthData = {email, password};
    console.log(userAuthData);
    setIsSubmitting(true);
  };

  return (
    <Auth
      email={email}
      password={password}
      isSubmmitting={isSubmmitting}
      setEmail={setEmail}
      setPassword={setPassword}
      onFormSubmit={handleFormSubmit} />);
};

export default AuthContainer;